<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Zona Privada - Academia</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h2>Zona Privada</h2>
    <button class="login-btn" id="logout">Cerrar sesión</button>
  </header>

  <main>
    <h1>Bienvenido 🎉</h1>
    <p>Este es el contenido exclusivo para estudiantes de la Academia.</p>

    <!-- Sección de Video -->
    <section>
      <h2>Clase en Video</h2>
      <video width="640" height="360" controls>
        <source src="Videos\¿Qué es la tonalidad y por qué todo gira a su alrededor_.mp4" type="video/mp4">
        Tu navegador no soporta video.
      </video>
    </section>

    <!-- Sección de Audio -->
    <section>
      <h2>Podcast o Material de Audio</h2>
      <audio controls>
        <source src="Audios\Marcos Vidal - Cara a Cara.mp3" type="audio/mpeg">
        Tu navegador no soporta audio.
      </audio>
    </section>

    <!-- Sección de PDF -->
    <section>
      <h2>Guía de Estudio en PDF</h2>
      <iframe src="Documentos\Letra Final y mejorada Abre mis ojos.pdf" width="100%" height="600px"></iframe>
    </section>
  </main>

  <!-- Firebase Auth protección -->
  <script type="module">
    import { auth, db } from "./firebase-config.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const logoutBtn = document.getElementById("logout");

    // Proteger acceso
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "login.html";
      } else {
        // Revisar suscripción en Firestore
        const userRef = doc(db, "users", user.uid);
        const snap = await getDoc(userRef);

        if (!snap.exists() || snap.data().subscription !== "active") {
          window.location.href = "pago.html"; // página donde ofreces suscripción
        }
      }
    });

    // Logout
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
      window.location.href = "login.html";
    });

  </script>
</body>
</html>




